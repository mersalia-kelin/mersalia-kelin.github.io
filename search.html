<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>王国保卫战同人自创维基|自创展示网站|搜索页面</title>
    <link rel="stylesheet" href="home page.css">
    <style>
        body{
          background-image: url(背景.jpg);
        }
        .nav{
          background-color: slategrey;
        }
        label{
          color: gray;
        }
        .content{
          background-color: darkturquoise;
          opacity: 0.8;
          background-size: cover;
          color: mintcream;
          border: 3px dotted white;
        }
        .end{
          background-color: slategrey;
          height: 100px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .slt{
          color: white;
          }
    </style>
</head>
<body>
    <div class="nav">
      <div style="display: inline-block;">
        <button>
          首页
        </button>
        <div style="display: inline-block;">
          <!-- <a href="#" target="_blank" id="holder">主要页面</a> 
          <a href="#" target="_blank" id="holder">站点工具</a>  -->
          <a href="#" target="_blank" id="holder">随机页面</a> 
        </div>
      </div>
      <div style="display: inline-block; position: absolute; right: 10px;">
        <form id="IntersearchForm" action="/kingwiki/search" method="get" target="_blank">
          <label class="slt">搜索</label>
          <input id="IntersearchInput" name="key" type="text" placeholder="在这里发现更多宇宙" maxlength="30">
          <input type="submit" value="🔍">
        </form>
      </div>
      <hr>
      </div>
      <div class="content">
        <h2 style="font-size: 26px;">站内搜索</h2>
        <hr>
      </div>
    </div>

    <div>
      <form id="searchForm">
        <label for="searchInput">搜索关键词：</label>
        <input type="text" id="searchInput" name="searchInput">
        <button type="submit">搜索</button>
      </form>
      <table id="resultsTable"  border="3" style="background-color: gray;">
          <thead style="background-color: darkgray;">
            <tr>
              <th>标题</th>
              <th>内容</th>
            </tr>
          </thead>
        <tbody id="resultsBody"  style="background-color: burlywood;">
        </tbody>
      </table>    
    </div>

    <script>
      // 示例数据
      const data = [
        { title: '王国保卫战：清统', content: 'https://mersalia-kelin.github.io/kingwiki/self-creationwiki/hegemony.html' },
        { title: '文章2', content: '这是文章2的内容' },
        { title: '文章3', content: '这是文章3的内容' },
      ];
      // 获取DOM元素
      const IntersearchForm = document.getElementById('IntersearchForm');
      const searchForm = document.getElementById('searchForm');
      const searchInputExternal = document.querySelector('#IntersearchForm input[name="key"]'); // 或者使用其他选择器来获取正确的输入框
      const searchInput = document.getElementById('searchInput');
      const resultsBody = document.getElementById('resultsBody');
      // 监听搜索表单的提交事件
      IntersearchForm.addEventListener('submit', function (event) {
        const row = document.createElement('tr');
            const titleCell = document.createElement('td');
            const contentCell = document.createElement('td');
            titleCell.textContent = result.title;
            //contentCell.textContent = result.content;
                // 检查content是否为URL，并创建相应的DOM元素
            if (/^(https?:\/\/[^\s/$.?#].[^\s]*$)/i.test(result.content)) {
              // 如果content是URL，则创建一个链接
              const link = document.createElement('a');
              link.href = result.content;
              link.textContent = result.content.replace(/^(https?:\/\/[^\/]+)/, (match) => match.split('/')[2].split('.')[0]); // 可选：显示更简洁的链接文本（例如，只显示域名的第一部分）
              // 或者，如果您想显示完整的URL作为链接文本，请使用：
              // link.textContent = result.content;
              contentCell.appendChild(link);
            } else {
              // 如果content不是URL，则直接显示文本
              contentCell.textContent = result.content;
            }
            row.appendChild(titleCell);
            row.appendChild(contentCell);
            resultsBody.appendChild(row);
      })
      searchForm.addEventListener('submit', function (event) {
          event.preventDefault(); // 阻止表单默认提交行为
          const keyword = searchInput.value.trim(); // 获取搜索关键词
          if (!keyword) return; // 如果关键词为空，不进行搜索
          // 根据关键词搜索数据
          const results = data.filter(item => item.title.includes(keyword) || item.content.includes(keyword));
          // 清空表格内容
          resultsBody.innerHTML = '';
          // 将搜索结果显示在表格中
          results.forEach(result => {
            const row = document.createElement('tr');
            const titleCell = document.createElement('td');
            const contentCell = document.createElement('td');
            titleCell.textContent = result.title;
            //contentCell.textContent = result.content;
                // 检查content是否为URL，并创建相应的DOM元素
            if (/^(https?:\/\/[^\s/$.?#].[^\s]*$)/i.test(result.content)) {
              // 如果content是URL，则创建一个链接
              const link = document.createElement('a');
              link.href = result.content;
              link.textContent = result.content.replace(/^(https?:\/\/[^\/]+)/, (match) => match.split('/')[2].split('.')[0]); // 可选：显示更简洁的链接文本（例如，只显示域名的第一部分）
              // 或者，如果您想显示完整的URL作为链接文本，请使用：
              // link.textContent = result.content;
              contentCell.appendChild(link);
            } else {
              // 如果content不是URL，则直接显示文本
              contentCell.textContent = result.content;
            }
            row.appendChild(titleCell);
            row.appendChild(contentCell);
            resultsBody.appendChild(row);
        });
      });
    </script>

    <div class="end">
        <span>
          <p>友情链接： 
          <a href="https://kingdomrush.huijiwiki.com/wiki/%E9%A6%96%E9%A1%B5" target="_blank">王国保卫战中文Wiki</a>
          </p>
        </span>
      </div>
</body>
</html>