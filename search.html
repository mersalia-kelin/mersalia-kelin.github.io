<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‹å›½ä¿å«æˆ˜åŒäººè‡ªåˆ›ç»´åŸº|è‡ªåˆ›å±•ç¤ºç½‘ç«™|è‡ªåˆ›æ•Œäººé¡¹ç›®ä¸€è§ˆ</title>
    <link rel="stylesheet" href="home page.css">
    <style>
        body{
          background-image: url(èƒŒæ™¯.jpg);
        }
        .nav{
          background-color: slategrey;
        }
        label{
          color: gray;
        }
        .content{
          background-color: darkturquoise;
          opacity: 0.8;
          background-size: cover;
          color: mintcream;
          border: 3px dotted white;
        }
        .end{
          background-color: slategrey;
          height: 100px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .slt{
          color: white;
          }
    </style>
</head>
<body>
    <div class="nav">
      <div style="display: inline-block;">
        <button>
          é¦–é¡µ
        </button>
        <div style="display: inline-block;">
          <!-- <a href="#" target="_blank" id="holder">ä¸»è¦é¡µé¢</a> 
          <a href="#" target="_blank" id="holder">ç«™ç‚¹å·¥å…·</a>  -->
          <a href="#" target="_blank" id="holder">éšæœºé¡µé¢</a> 
        </div>
      </div>
      <div style="display: inline-block; position: absolute; right: 10px;">
        <form id="IntersearchForm" action="/search" method="get" target="_blank">
          <label class="slt">æœç´¢</label>
          <input id="IntersearchInput" name="key" type="text" placeholder="åœ¨è¿™é‡Œå‘ç°æ›´å¤šå®‡å®™" maxlength="30">
          <input type="submit" value="ğŸ”">
        </form>
      </div>
      <hr>
      </div>
      <div class="content">
        <h2 style="font-size: 26px;">ç«™å†…æœç´¢</h2>
        <hr>
      </div>
    </div>

    <div>
      <form id="searchForm">
        <label for="searchInput">æœç´¢å…³é”®è¯ï¼š</label>
        <input type="text" id="searchInput" name="searchInput">
        <button type="submit">æœç´¢</button>
      </form>
      <table id="resultsTable"  border="3" style="background-color: gray;">
          <thead style="background-color: darkgray;">
            <tr>
              <th>æ ‡é¢˜</th>
              <th>å†…å®¹</th>
            </tr>
          </thead>
        <tbody id="resultsBody"  style="background-color: burlywood;">
        </tbody>
      </table>    
    </div>

    <script>
      // ç¤ºä¾‹æ•°æ®
      const data = [
        { title: 'å“¥å¸ƒæ—', content: 'https://mersalia-kelin.github.io/enemy' },
        { title: 'æ–‡ç« 2', content: 'è¿™æ˜¯æ–‡ç« 2çš„å†…å®¹' },
        { title: 'æ–‡ç« 3', content: 'è¿™æ˜¯æ–‡ç« 3çš„å†…å®¹' },
      ];
      // è·å–DOMå…ƒç´ 
      const IntersearchForm = document.getElementById('IntersearchForm');
      const searchForm = document.getElementById('searchForm');
      const searchInputExternal = document.querySelector('#IntersearchForm input[name="key"]'); // æˆ–è€…ä½¿ç”¨å…¶ä»–é€‰æ‹©å™¨æ¥è·å–æ­£ç¡®çš„è¾“å…¥æ¡†
      const searchInput = document.getElementById('searchInput');
      const resultsBody = document.getElementById('resultsBody');
      // ç›‘å¬æœç´¢è¡¨å•çš„æäº¤äº‹ä»¶
      IntersearchForm.addEventListener('submit', function (event) {
        const row = document.createElement('tr');
            const titleCell = document.createElement('td');
            const contentCell = document.createElement('td');
            titleCell.textContent = result.title;
            //contentCell.textContent = result.content;
                // æ£€æŸ¥contentæ˜¯å¦ä¸ºURLï¼Œå¹¶åˆ›å»ºç›¸åº”çš„DOMå…ƒç´ 
            if (/^(https?:\/\/[^\s/$.?#].[^\s]*$)/i.test(result.content)) {
              // å¦‚æœcontentæ˜¯URLï¼Œåˆ™åˆ›å»ºä¸€ä¸ªé“¾æ¥
              const link = document.createElement('a');
              link.href = result.content;
              link.textContent = result.content.replace(/^(https?:\/\/[^\/]+)/, (match) => match.split('/')[2].split('.')[0]); // å¯é€‰ï¼šæ˜¾ç¤ºæ›´ç®€æ´çš„é“¾æ¥æ–‡æœ¬ï¼ˆä¾‹å¦‚ï¼Œåªæ˜¾ç¤ºåŸŸåçš„ç¬¬ä¸€éƒ¨åˆ†ï¼‰
              // æˆ–è€…ï¼Œå¦‚æœæ‚¨æƒ³æ˜¾ç¤ºå®Œæ•´çš„URLä½œä¸ºé“¾æ¥æ–‡æœ¬ï¼Œè¯·ä½¿ç”¨ï¼š
              // link.textContent = result.content;
              contentCell.appendChild(link);
            } else {
              // å¦‚æœcontentä¸æ˜¯URLï¼Œåˆ™ç›´æ¥æ˜¾ç¤ºæ–‡æœ¬
              contentCell.textContent = result.content;
            }
            row.appendChild(titleCell);
            row.appendChild(contentCell);
            resultsBody.appendChild(row);
      })
      searchForm.addEventListener('submit', function (event) {
          event.preventDefault(); // é˜»æ­¢è¡¨å•é»˜è®¤æäº¤è¡Œä¸º
          const keyword = searchInput.value.trim(); // è·å–æœç´¢å…³é”®è¯
          if (!keyword) return; // å¦‚æœå…³é”®è¯ä¸ºç©ºï¼Œä¸è¿›è¡Œæœç´¢
          // æ ¹æ®å…³é”®è¯æœç´¢æ•°æ®
          const results = data.filter(item => item.title.includes(keyword) || item.content.includes(keyword));
          // æ¸…ç©ºè¡¨æ ¼å†…å®¹
          resultsBody.innerHTML = '';
          // å°†æœç´¢ç»“æœæ˜¾ç¤ºåœ¨è¡¨æ ¼ä¸­
          results.forEach(result => {
            const row = document.createElement('tr');
            const titleCell = document.createElement('td');
            const contentCell = document.createElement('td');
            titleCell.textContent = result.title;
            //contentCell.textContent = result.content;
                // æ£€æŸ¥contentæ˜¯å¦ä¸ºURLï¼Œå¹¶åˆ›å»ºç›¸åº”çš„DOMå…ƒç´ 
            if (/^(https?:\/\/[^\s/$.?#].[^\s]*$)/i.test(result.content)) {
              // å¦‚æœcontentæ˜¯URLï¼Œåˆ™åˆ›å»ºä¸€ä¸ªé“¾æ¥
              const link = document.createElement('a');
              link.href = result.content;
              link.textContent = result.content.replace(/^(https?:\/\/[^\/]+)/, (match) => match.split('/')[2].split('.')[0]); // å¯é€‰ï¼šæ˜¾ç¤ºæ›´ç®€æ´çš„é“¾æ¥æ–‡æœ¬ï¼ˆä¾‹å¦‚ï¼Œåªæ˜¾ç¤ºåŸŸåçš„ç¬¬ä¸€éƒ¨åˆ†ï¼‰
              // æˆ–è€…ï¼Œå¦‚æœæ‚¨æƒ³æ˜¾ç¤ºå®Œæ•´çš„URLä½œä¸ºé“¾æ¥æ–‡æœ¬ï¼Œè¯·ä½¿ç”¨ï¼š
              // link.textContent = result.content;
              contentCell.appendChild(link);
            } else {
              // å¦‚æœcontentä¸æ˜¯URLï¼Œåˆ™ç›´æ¥æ˜¾ç¤ºæ–‡æœ¬
              contentCell.textContent = result.content;
            }
            row.appendChild(titleCell);
            row.appendChild(contentCell);
            resultsBody.appendChild(row);
        });
      });
    </script>

    <div class="end">
        <span>
          <p>å‹æƒ…é“¾æ¥ï¼š 
          <a href="https://kingdomrush.huijiwiki.com/wiki/%E9%A6%96%E9%A1%B5" target="_blank">ç‹å›½ä¿å«æˆ˜ä¸­æ–‡Wiki</a>
          </p>
        </span>
      </div>
</body>
</html>